#RetroDevStudio.MetaData.BASIC:2049,BASIC V2,lowercase,10,10
30 PX = 20:    REM PLAYER POSTIONS
40 PY = 12
50 LPX = 20:   REM PERIVOUS PLAYER POSITIONS
60 LPY = 12

100 RC = 4:    REM ROOM COUNT
110 RWMAX = 4: REM ROOM MAX WIDTH
120 RHMAX = 3: REM ROOM MAX HEIGHT


300 DIM MAP(39,24)
310 DIM ROOMS(RC,3): REM ROOM POS AND SIZES (X, Y, WIDHT, HEIGHT)

500 GOSUB 3010
510 GOSUB 4020

800 END


3000 REM MAP GENERATOR
3010 FOR Y = 0 TO 24
3020 FOR X = 0 TO 39
3030 MAP(X,Y) = 32
3050 NEXT
3055 PRINT "CLEARING MAP ";(Y*40 + X) / (40*25) * 100;"%"
3060 NEXT

3110 FOR I = 0 TO RC
3120 RW = INT(RND(0) * RWMAX) + 3
3130 RH = INT(RND(0) * RHMAX) + 3
3140 RX = INT(RND(0) * (40-RW))
3150 RY = INT(RND(0) * (25-RH))
3160 PRINT "PLACING ROOM ";I
3200 ROOMS(I,0) = RX
3210 ROOMS(I,1) = RY
3220 ROOMS(I,2) = RW
3230 ROOMS(I,3) = RH
3240 FOR X = 0 TO RW
3250 FOR Y = 0 TO RH
3260 MAP(RX + X, RY + Y) = 35
3270 NEXT
3280 NEXT
3290 NEXT
3390 RETURN

4000 REM DRAWMAP
4020 FOR Y = 0 TO 24
4030 FOR X = 0 TO 39
4040 POKE 1024+X+(Y*40),MAP(X,Y)
4050 NEXT
4060 NEXT
4070 RETURN